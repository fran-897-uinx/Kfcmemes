{% extends "main.html" %}
{% load static %}
{% block content %}

<main class="py-14 px-6 min-h-screen bg-gray-50">

  <!-- Header -->
  <div class="text-center mb-16">
    <h1 class="text-5xl font-extrabold font-mono text-gray-700">
      üçó KFC Restaurant Blog
    </h1>
    <p class="text-base italic text-gray-500 mt-2">
      Culinary stories, chef secrets & delicious inspirations updated daily.
    </p>
    <div class="flex justify-center mt-6">
      <span class="h-1 w-28 bg-gradient-to-r from-yellow-400 via-red-500 to-yellow-400 rounded-full"></span>
    </div>
  </div>

  <!-- Blog Grid -->
  <section class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">

    <!-- OWNER BLOG POSTS -->
    {% for item in blogs %}
    <div class="group relative rounded-3xl shadow-lg hover:shadow-2xl bg-white overflow-hidden border border-gray-200 hover:-translate-y-1 transition duration-300">
      
      <!-- Image -->
      <div class="overflow-hidden">
        <img src="{{ item.image.url }}" alt="{{ item.title }}" 
        class="w-full h-56 object-cover group-hover:scale-110 transition duration-500">
      </div>

      <!-- Content -->
      <div class="p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-2 group-hover:text-red-600 transition">
          {{ item.title }}
        </h2>

        {% if item.sub_title %}
        <p class="text-xs font-semibold uppercase tracking-wide text-red-600 mb-3">
          {{ item.sub_title }}
        </p>
        {% endif %}

        <p class="text-gray-600 text-sm leading-relaxed mb-4">
          {{ item.description|truncatechars:180 }}
        </p>

        <hr class="my-3">

        <div class="flex items-center justify-between text-xs text-gray-500">
          <span class="italic">Published: {{ item.created_at }}</span>
          <a href="{% url 'blog_details' item.id %}" class="text-red-500 font-medium hover:text-red-700 hover:underline">
            Read more ‚Üí
          </a>
        </div>
      </div>
    </div>
    {% empty %}
    {% endfor %}

    <!-- API BLOG MEALS -->
    {% for meal in meals %}
    <div class="group relative rounded-3xl shadow-lg hover:shadow-2xl bg-white overflow-hidden border border-gray-200 hover:-translate-y-1 transition duration-300">

      <!-- Image -->
      <div class="overflow-hidden">
        <img src="{{ meal.strMealThumb }}" alt="{{ meal.strMeal }}"
        class="w-full h-56 object-cover group-hover:scale-110 transition duration-500">
      </div>

      <!-- Content -->
      <div class="p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-2 group-hover:text-red-600 transition">
          {{ meal.strMeal }}
        </h2>

        <p class="text-xs font-semibold uppercase tracking-wide text-yellow-700 bg-yellow-100 px-3 py-1 rounded-full inline-block mb-3">
          {{ meal.strCategory|default:"Meal" }}
        </p>

        <p class="text-gray-600 text-sm leading-relaxed mb-4">
          {{ meal.strInstructions|truncatechars:180 }}
        </p>

        <hr class="my-3">

        <div class="flex items-center justify-between text-xs text-gray-500">
          <span>{{ meal.strArea }}</span>
          <a href="{{ meal.strSource|default:'#' }}" target="_blank" 
            class="text-red-500 font-medium hover:text-red-700 hover:underline">
            Read more ‚Üí
          </a>
        </div>
      </div>

    </div>
    {% empty %}
    <!-- Skeleton Loader -->
    <div class="col-span-full text-center py-20">
      <div class="animate-pulse space-y-4">
        <div class="h-8 bg-gray-300 w-64 mx-auto rounded"></div>
        <div class="h-4 bg-gray-300 w-96 mx-auto rounded"></div>
        <div class="h-4 bg-gray-300 w-80 mx-auto rounded"></div>
      </div>
      <p class="mt-6 text-gray-500 text-sm">Fetching the latest food articles... üç¥</p>
    </div>
    {% endfor %}

  </section>

</main>

{% endblock %}
