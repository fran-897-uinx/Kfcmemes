EmailMultiAlternatives is a class in Django's email handling framework that allows you to create and send emails with multiple content types, such as plain text and HTML. This is particularly useful for ensuring that your emails are readable across different email clients, some of which may not support HTML.



def reservation_view(request):
    if request.method == "POST":
        name = request.POST.get("name")
        email = request.POST.get("email")
        date = request.POST.get("date")
        number = request.POST.get("guest_phone_num")
        description = request.POST.get("message")

        if not all([name, email, date, number, description]):
            return render(
                request,
                "reservation.html",
                {"error": "All fields are required, please."},
            )

        # Save reservation
        reservation = Reservation.objects.create(
            name=name,
            email=email,
            date=date,
            guest_phone_num=number,
            meassage=description,
        )

        html_content = render_to_string(
            "reservation/emails/reservation_email.html",
            {
                "name": name,
                "email": email,
                "date": date,
                "guest_phone_num": number,
                "description": description,
            },
        )

        # Send confirmation email
        subject = "Your Table Reservation Has Been Received"
        text_content = f"""
        Hello {name},
        Your table reservation has been received. You will receive a call shortly.
        Date: {date}
        We look forward to having you dine with us.
        
        - The KFC Team
        """
        from_email = settings.DEFAULT_FROM_EMAIL
        recipient_list = [reservation.email]

        email = EmailMultiAlternatives(subject, text_content, from_email, to=recipient_list)
        email.attach_alternative(html_content, "text/html")
        email.send(fail_silently=False)

        return render(
            request,
            "reservation/reservation_success.html",
            {"reservation": reservation},
        )

    return render(request, "reservation.html")

# settings.py
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587   
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'your_email@gmail.com'
EMAIL_HOST_PASSWORD = 'your_email_password'# rest_framework settings in settings.py
REST_FRAMEWORK = {
    # Use Django's standard `django.contrib.auth` permissions,
    # or allow read-only access for unauthenticated users.
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination',
    'PAGE_SIZE': 10,
}# To enable the browsable API, include the following in your project's urls.py
from django.urls import path, include
from django.contrib import admin
urlpatterns = [ 
    path('admin/', admin.site.urls),
    path('api-auth/', include('rest_framework.urls')),  # Add this line
]# serializers.py
from rest_framework import serializers
from .models import Menu
class MenuSerializer(serializers.ModelSerializer):
    class Meta:
        model = Menu
        fields = '__all__'
        # Alternatively, specify fields explicitly
        # fields = ['id', 'name', 'description', 'price', 'selection']# views.py
